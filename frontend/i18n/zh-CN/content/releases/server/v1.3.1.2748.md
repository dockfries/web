---
tag: v1.3.1.2748
publishedAt: "2024-08-18T09:47:11Z"
htmlUrl: https://github.com/openmultiplayer/open.mp/releases/tag/v1.3.1.2748
highlights:
  - RakNet 网络库的重大稳定性与性能提升
  - 核心同步路径上远程过程调用 (RPC) 的排序和可靠性改进
  - 对对话框、菜单和网络数据进行了更全面的验证检查
  - 新增了用于启动器和 Discord 状态的服务器徽标支持
assets:
  - label: Windows
    url: https://github.com/openmultiplayer/open.mp/releases/download/v1.3.1.2748/open.mp-win-x86.zip
    size: "29.8 MB"
  - label: Linux
    url: https://github.com/openmultiplayer/open.mp/releases/download/v1.3.1.2748/open.mp-linux-x86.tar.gz
    size: "23.7 MB"
  - label: Linux (DynSSL)
    url: https://github.com/openmultiplayer/open.mp/releases/download/v1.3.1.2748/open.mp-linux-x86-dynssl.tar.gz
    size: "20.1 MB"
---

## 变更内容

- 修复了在使用格式字符串时，偶尔不显示字符串的问题。
- 移除了在加载或卸载侧脚本（filterscript）时不必要的 `OnPlayerConnect` 和 `OnPlayerDisconnect` 回调，取而代之的是引入了 `OnScript(Un)LoadForPlayer` 回调。
- 修复了当加载多个脚本时，崩溃检测 (crashdetect) 无法找到文件名和行号的问题。
- 修复了许多远程过程调用 (RPC) 的排序通道和可靠性设置。
- 提升了网络线程 (RakNet) 的性能。
- 修复了大量 RakNet 崩溃问题，并实现了更安全的内存管理。
- 修复了多个连接问题，并改进了内部玩家池的清理机制。
- 修复了 `GetGameText` 函数。
- 新增了内容分发网络 (CDN) URL 有效性检查。
- 在 RakNet 中实现了新的 `InternalPacketPool`。
- 为对话框响应添加了更多的数据有效性检查。
- 为菜单行添加了有效性检查。
- 实现了人类可读的 HTTP 错误信息。
- 停止广播观战者的同步数据。
- 修复了当用户 Windows 系统设置为带有非 ASCII 字符名称的语言时，open.mp Windows 版本无法加载的问题。
- 从运行时警告中移除了大量 Pawn 原生函数的弃用通知。
- 为玩家的生命值和护甲设置了默认值。
- 提升了响应“分数和 ping 查询”远程过程调用 (RPC) 的性能（用于计分板）。
- 添加了服务器徽标功能，可在启动器和 Discord 状态中使用。
- 修复了我们自项目开始以来就一直存在的臭名昭著的 RakNet 崩溃问题。

## 按合并的拉取请求整理的更新日志

- fix atcprintf failure message not showing fmt string by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/860
- change invalid weapon slot to -1 by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/862
- Call OnScript(Un)LoadForPlayer on script (un)load by @Andosius in https://github.com/openmultiplayer/open.mp/pull/878
- Revert "Revert `OnPlayerConnect` vandalism." by @Hual in https://github.com/openmultiplayer/open.mp/pull/887
- Handle queries when logging is enabled by @ksenonadv in https://github.com/openmultiplayer/open.mp/pull/889
- Revert "Support LFS" by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/890
- Fix OnPlayerConnect regression after gmx. by @ksenonadv in https://github.com/openmultiplayer/open.mp/pull/891
- RakNet crash fixes, performance improvements, fix ordering channels for some RPCs by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/883
- Fixed: several connection logic issues by @uifdev in https://github.com/openmultiplayer/open.mp/pull/906
- Fix GetGameText native giving incorrect/corrupt values by @Sreyas-Sreelal in https://github.com/openmultiplayer/open.mp/pull/915
- Fix test component by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/913
- sync raknet, fix InternalPacketPool::ClearPool crash by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/911
- Validate CDN URL by @myudev in https://github.com/openmultiplayer/open.mp/pull/919
- improved dialog response checking by @atomlin-git in https://github.com/openmultiplayer/open.mp/pull/902
- added check for possible menu row values by @atomlin-git in https://github.com/openmultiplayer/open.mp/pull/922
- Add server logo feature, human readable httplib errors, and bunch of fixes by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/928
- Remove conan from SDK, Disable unicode component by default, Bump version by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/933
- SDK and Network as submodules by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/937
- Stop broadcasting spectators sync data. by @ksenonadv in https://github.com/openmultiplayer/open.mp/pull/939
- Fix locale switch for names with non-ascii characters by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/945
- Remove runtime pawn native deprecations for mixed spellings by @NexiusTailer in https://github.com/openmultiplayer/open.mp/pull/952
- Tiny correction in TestComponent by @NexiusTailer in https://github.com/openmultiplayer/open.mp/pull/956
- Network fixes by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/957
- Update broken plugins list by @NexiusTailer in https://github.com/openmultiplayer/open.mp/pull/961
- default values for hp and armor in Player::reset and constructor by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/960
- cache generated BS for a short period of time for scoreboard rpc by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/962

## 新贡献者

- @Andosius 在 https://github.com/openmultiplayer/open.mp/pull/878 首次贡献
- @uifdev 在 https://github.com/openmultiplayer/open.mp/pull/906 首次贡献
- @Sreyas-Sreelal 在 https://github.com/openmultiplayer/open.mp/pull/915 首次贡献
- @myudev 在 https://github.com/openmultiplayer/open.mp/pull/919 首次贡献
- @atomlin-git 在 https://github.com/openmultiplayer/open.mp/pull/902 首次贡献

**完整更新日志**：https://github.com/openmultiplayer/open.mp/compare/v1.2.0.2670...v1.3.1.2748
