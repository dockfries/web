---
tag: v1.2.0.2670
publishedAt: "2024-01-29T03:17:22Z"
htmlUrl: https://github.com/openmultiplayer/open.mp/releases/tag/v1.2.0.2670
highlights:
  - 关键安全修复和可测量的性能提升
  - 面向启动器的新服务器横幅和 Discord 查询设置
  - IPv4 优先的公告处理，改进的 HTTP 行为
  - RakNet 崩溃修复，以及更强的游戏数据验证
assets:
  - label: Windows
    url: https://github.com/openmultiplayer/open.mp/releases/download/v1.2.0.2670/open.mp-win-x86.zip
    size: "44.0 MB"
  - label: Linux
    url: https://github.com/openmultiplayer/open.mp/releases/download/v1.2.0.2670/open.mp-linux-x86.tar.gz
    size: "24.5 MB"
  - label: Linux (DynSSL)
    url: https://github.com/openmultiplayer/open.mp/releases/download/v1.2.0.2670/open.mp-linux-x86-dynssl.tar.gz
    size: "20.9 MB"
---

## 重要信息

**请仔细阅读：** 我们强烈建议所有 open.mp 服务器更新至此版本。此次更新不仅带来了明显的性能改进，更重要的是**包含了关键的安全修复。**

## 变更内容

- 若干安全修复。
- 显著提升了性能，特别是 Pawn 原生函数现在的工作方式。
- 新增配置变量，用于设置在新版 [open.mp 启动器] 中显示的横幅和 Discord 邀请链接。
- 公告系统现在默认使用 IPv4，而非在可用时使用 IPv6。
- 修复了 `Get(Player)ObjectMaterial(Text)` 返回颜色格式错误和 `modelid` 的问题。
- 修复了在分配内存超过预留空间时可能导致服务器崩溃的问题，现在会提供详细的警告信息。
- 修复了在释放数据包时 RakNet 的随机崩溃问题。
- 在多个位置验证伤害原因（武器）。
- 修复了 `Get(Player)Gravity` 函数。
- 新增用于禁用加入消息和动画验证的配置变量。
- 支持同步封禁，以便在需要时一次性封禁多个玩家。
- 修复了 WSL 相关的问题。

## 按合并的拉取请求整理的更新日志

- Synchronize bans so multiple players are banned at once by @Hual in https://github.com/openmultiplayer/open.mp/pull/776
- Support LFS by @Hual in https://github.com/openmultiplayer/open.mp/pull/777
- Add core->requestHTTP4. Force IPV4 requests for announce. Use bind address if provided by @ksenonadv in https://github.com/openmultiplayer/open.mp/pull/786
- Add config options to disable animation validation and join messages by @Hual in https://github.com/openmultiplayer/open.mp/pull/792
- Retrieve player objects material colors in a ARGB format by @mrreus in https://github.com/openmultiplayer/open.mp/pull/795
- Add a static openssl warning by @Hual in https://github.com/openmultiplayer/open.mp/pull/793
- New way of handling ParamCast errors instead of throwing exceptions. by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/798
- return modelid in GetPlayerObjectMaterial by @adib-yg in https://github.com/openmultiplayer/open.mp/pull/805
- Return 0.0 if floatstr fails and throws an exception by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/812
- Weapon validity check in foot, passenger, and vehicle sync, and Give/TakeDamage events by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/804
- Fix amx_Allot trying to access invalid memory when data size is higher than amx STK size by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/819
- Remove preconnect packet handler by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/820
- 52 IS a valid damage reason. by @Y-Less in https://github.com/openmultiplayer/open.mp/pull/825
- Change gravity type to float by @vedran77 in https://github.com/openmultiplayer/open.mp/pull/832
- Add a note about mac compilation with brew. by @Y-Less in https://github.com/openmultiplayer/open.mp/pull/828
- Add banners & discord configs and send through query by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/831

## 新贡献者

- @adib-yg 在 https://github.com/openmultiplayer/open.mp/pull/805 首次贡献
- @vedran77 在 https://github.com/openmultiplayer/open.mp/pull/832 首次贡献

**完整更新日志**：https://github.com/openmultiplayer/open.mp/compare/v1.1.0.2612...v1.2.0.2670
