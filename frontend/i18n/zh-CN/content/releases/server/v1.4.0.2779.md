---
tag: v1.4.0.2779
publishedAt: "2025-01-12T19:56:45Z"
htmlUrl: https://github.com/openmultiplayer/open.mp/releases/tag/v1.4.0.2779
highlights:
  - 为受支持的客户端提供的可选 open.mp 协议加密
  - 递归加载组件，并改进了 Linux 链接器的行为
  - 修复了车辆和物体相关的多处崩溃与同步问题
  - 新增用于检测 open.mp 客户端的原生函数 `IsPlayerUsingOmp`
assets:
  - label: Windows
    url: https://github.com/openmultiplayer/open.mp/releases/download/v1.4.0.2779/open.mp-win-x86.zip
    size: "29.3 MB"
  - label: Linux
    url: https://github.com/openmultiplayer/open.mp/releases/download/v1.4.0.2779/open.mp-linux-x86.tar.gz
    size: "23.7 MB"
  - label: Linux (DynSSL)
    url: https://github.com/openmultiplayer/open.mp/releases/download/v1.4.0.2779/open.mp-linux-x86-dynssl.tar.gz
    size: "20.1 MB"
---

## 变更内容

- 实现了用于 open.mp 启动器的加密协议，需先在 `config.json` 中启用（`network.use_omp_encryption`）。
- 修复了在移动客户端上使用 `SetPlayerSkin` 的一个小问题。
- 新增了相机模式的有效性检查。
- 修复了 Windows 系统中 `GetTickCount` 的返回值。
- 修复了在某些事件和 Pawn 回调中销毁车辆时导致的崩溃。
- 禁用了 AMX 运行时的动态 DLL 加载功能，尤其适用于从 CompuPhase 网站安装了默认 Pawn 的用户。
- 修复了 `GetVehicleLandingGearState` 返回值反转的问题。
- 修复了玩家离开服务器后，其信息仍会随机保留在启动器玩家列表中的问题。
- 为拖车和拖车同步添加了更多的有效性检查。
- 支持递归加载文件夹中的组件。
- 在 Linux 系统上，优先加载以 `$` 开头的组件，并使用 `RTLD_GLOBAL` 标志加载它们。
- 修复了与移动物体相关的崩溃问题。
- 修复了玩家车辆数据在 `OnPlayerDeath` 事件被调用前被重置的问题。
- 新增了通过原生函数 `IsPlayerUsingOmp` 检测玩家是否使用 open.mp 客户端的功能。

## 按合并的拉取请求整理的更新日志

- Fix SetPlayerSkin (add custom skin without DL client) for mobile clients by @f0Re3t in https://github.com/openmultiplayer/open.mp/pull/978
- Validate camera modes better by @NexiusTailer in https://github.com/openmultiplayer/open.mp/pull/975
- fix vehicle release in events called in driver sync by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/983
- GetTickCount on Windows to return tick count of server instead of system by @Hual in https://github.com/openmultiplayer/open.mp/pull/987
- Disable dynamic DLL loading for AMX runtime by @Hual in https://github.com/openmultiplayer/open.mp/pull/988
- Main script config fixes by @Hual in https://github.com/openmultiplayer/open.mp/pull/989
- Fix inverted GetVehicleLandingGearState value by @Hual in https://github.com/openmultiplayer/open.mp/pull/990
- Fix issues with reallocating bitstreams in sendRPC/sendPacket by @Hual in https://github.com/openmultiplayer/open.mp/pull/997
- More validity checks for vehicles (mainly trailers) by @NexiusTailer in https://github.com/openmultiplayer/open.mp/pull/985
- Fix player teleport natives and query player list by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/1003
- Recursively load components by @myudev in https://github.com/openmultiplayer/open.mp/pull/920
- Fix moving player objects crash due to out-of-order destruction by @Hual in https://github.com/openmultiplayer/open.mp/pull/1016
- load comps starting with `$` sooner and with RTLD_GLOBAL on linux by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/1020
- call state change event after death event, to prevent unwanted cleanups by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/1035
- omp user detection & server to client encryption for omp users by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/1026
- remove rivershell from main repository and move it to a separate one by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/1038
- revert state change, dont handle in vehicle's event, use death event ... by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/1037
- all my homies hate linux (not the kernel btw, the ecosystem btw) (btw) by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/1040
- bump version by @AmyrAhmady in https://github.com/openmultiplayer/open.mp/pull/1041

## 新贡献者

- @f0Re3t 在 https://github.com/openmultiplayer/open.mp/pull/978 首次贡献

**完整更新日志**：https://github.com/openmultiplayer/open.mp/compare/v1.3.1.2744...v1.4.0.2779
